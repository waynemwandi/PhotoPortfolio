/*==============================================================================

 * Template Name: Zulia - Photography Portfolio Template
 * Template URI: 
 * Author: ixtheme - (https://themeforest.net/user/ixtheme)
 * Description: Photography Portfolio Template
 * Version: 1.0
 * Copyright 2020 ixtheme

==============================================================================*/


(function ($) {
    "use strict";

    $(window).on('load', function () {
        preLoader();
        parallax();
        magnificPopup();
    });

    $(document).ready(function () {
        menuToggle();
        landingSlider();
        smoothScroll();
        imgDup();
        backgroundImage();
        headerPinUnpin();
        formInit();
    });

    // PreLoader Init
    function preLoader() {
        setTimeout(function () {
            $('body').addClass('loaded');
            $('.preloader-wrapper').addClass('loaded');

            // isotope init
            isotopeInit();

            // wow init
            setTimeout(function(){
                $('.wow').addClass('loaded');
                var wow = new WOW().init();
            },1000);

            setTimeout(function () {
                $('.preloader-wrapper').remove();
            }, 1500);
        }, 50);
    };

    // headerPinUnpin init
    function headerPinUnpin() {
        var lastScroll = 0;
        window.onscroll = function() {
            let currentScroll = document.documentElement.scrollTop || document.body.scrollTop;
            if (currentScroll > 0 && lastScroll <= currentScroll){
                lastScroll = currentScroll;
                $('header').addClass('header-unpinned');
            }else{
                lastScroll = currentScroll;
                $('header').removeClass('header-unpinned');
            }
        };
    };


    // menuToggle init
    function menuToggle() {
        $('.menu-toggle .menu-icon').on('click', function() {
            $(this).toggleClass('clicked');
            $('.menu-wrapper').toggleClass('show');
            $('header').toggleClass('bg-transparent');
        });

        $('[data-tdelay]').each(function () {
            var value = $(this).attr('data-tdelay');
            $(this).css({
                '-webkit-transition-delay': ''+value+'s',
                'transition-delay': ''+value+'s'
            });
        });
    };


    // landingSlider init
    function landingSlider() {
        var landingSlider = new Swiper(".landing-content .swiper-container", {
            loop: true,
            grabCursor: false,
            speed: 800,
            parallax: true,
            effect : 'fade',
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            pagination: {
              el: '.swiper-pagination',
              type: 'bullets',
              clickable: true,
            },
        });

        $('.navigator-link').on('mouseenter', function() {
            $(".slider-bg").addClass('discover-all');
        });
        $('.navigator-link').on('mouseleave', function() {
            $(".slider-bg").removeClass('discover-all');
        });
    };

    // imgDup Init
    function imgDup() {
        $('.imgDup').each(function() {
            var imgDupSrc = $(this).attr('src');
            $('<img class="dupImgSrc" src="'+imgDupSrc+'">').insertAfter(this);
        });
    };

    // Inline BackgroundImage Init
    function backgroundImage() {
        $('[data-bgi]').each(function () {
            $(this).addClass('data-bgi-init');
            var src = $(this).attr('data-bgi');
            $(this).css({
                'background-image': 'url(' + src + ')'
            });
        });
    };


    // Smooth-Scroll init
    function smoothScroll() {
        var scrollLink = $('.scroll-to-top');
        scrollLink.on("click", function () {
            if (location.pathname.replace(/^\//, '') === this.pathname.replace(/^\//, '') && location.hostname === this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $("[name=" + this.hash.slice(1) + "]");
                if (target.length) {
                    $("html, body").animate({
                        scrollTop: target.offset().top
                    }, 700, "easeInOutExpo");
                    return false;
                }
            }
        });
    };

    // parallax init
    function parallax() {
        $('.parallax').jarallax({
            speed: 0.2
        });
    };

    // isotope init
    function isotopeInit() {
        $('.gallery-items').isotope();
    };

    // magnificPopup Init
    function magnificPopup() {
        $('.gallery-items').magnificPopup({
            delegate: '.gallery-item a',
            type: 'image',
            removalDelay: 200,
            callbacks: {
                beforeOpen: function() {
                    this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');
                    this.st.mainClass = this.st.el.attr('data-effect');
                }
            },
            gallery: {
                enabled: !0
            },
            image: {
                verticalFit: !0
            },
            closeOnContentClick: true,
            midClick: true 
        });
        if ($('.popup-video').length > 0) {
            $('.popup-video').magnificPopup({
                type: 'iframe',
                mainClass: 'mfp-fade',
                removalDelay: 200,
                preloader: true,
                fixedContentPos: false,
            });
        };
    };

    // form init
    function formInit() {
        $('.input-field').on('keydown change paste', function () {
            if ($(this).val().trim() == '') {
                $(this).siblings('label').show();
            } else {
                $(this).siblings('label').hide();
            }
        });
    };

})(jQuery);